                          ┌──────────────────────┐
                          │      rom_wb          │
                          │  Instruction Memory  │
                          │     (Wishbone)       │
                          └─────────┬────────────┘
                                    │ instr
                                    ▼
┌──────────────────────────────────────────────────────────┐
│                         secv.sv                          │
│              Top-Level CPU + FSM-Steuerung               │
│                                                          │
│  ┌──────────────┐                                        │
│  │  Fetch / PC  │◄───────────────┐                       │
│  │  pc, pc_next │                │ pc_sel                │
│  └──────┬───────┘                │                       │
│         │ instr                  │                       │
│         ▼                        │                       │
│  ┌──────────────┐                │                       │
│  │   decoder    │                │                       │
│  │ opcode/funct │                │                       │
│  │ src/imm/mux  │                │                       │
│  └──────┬───────┘                │                       │
│         │ rs1/rs2/rd             │                       │
│         ▼                        │                       │
│  ┌──────────────┐                │                       │
│  │     gpr      │                │                       │
│  │  x0…x31 RF   │                │                       │
│  └──────┬───────┘                │                       │
│         │ rs1/rs2                │                       │
│         ▼                        │                       │
│  ┌───────────────────────────────────────────────┐       │
│  │          Operand / Immediate MUXes            │       │
│  │ src1_sel, src2_sel, imm_sel                   │       │
│  └──────────────┬────────────────────────────────┘       │
│                 │ funit_in (src1, src2, op)              │
│                 ▼                                        │
│      ┌───────────────────────────────────────────┐       │
│      │          Function Unit Bus                │       │
│      │         (selected by funit)               │       │
│      └───────┬───────────┬───────────┬───────────┘       │
│              │           │           │                   │
│              ▼           ▼           ▼                   │
│        ┌────────┐  ┌────────┐  ┌────────┐                │
│        │  ALU   │  │ Branch │  │  MEM   │                │
│        │        │  │ Compare│  │ Load/  │                │
│        │ alu.sv │  │branch  │  │ Store  │                │
│        └────┬───┘  └────┬───┘  └────┬───┘                │
│             │           │           │                    │
│   alu_core  │           │           │ Wishbone           │
│             │           │           ▼                    │
│             │           │     ┌──────────────┐           │
│             │           │     │   ram_wb     │           │
│             │           │     │ Data Memory  │           │
│             │           │     │  (Wishbone)  │           │
│             │           │     └──────────────┘           │
│             │           │                                │
│             └───────────┴──────────┐                     │
│                        funit_out   │                     │
│                        (res, rdy)  │                     │
│                                    ▼                     │
│                         ┌────────────────┐               │
│                         │ Writeback MUX  │               │
│                         │ rd_sel         │               │
│                         └──────┬─────────┘               │
│                                │ rd_dat                  │
│                                ▼                         │
│                              gpr                         │
│                                                          │
│  ┌───────────────────────────────────────────────────┐   │
│  │                 CSR Subsystem                     │   │
│  │ csr.sv + csr_regs.sv                              │   │
│  │ - CSR read/write                                  │   │
│  │ - Exception aggregation                           │   │
│  │ - PMP / Trap preparation (partially wired)        │   │
│  └───────────────────────────────────────────────────┘   │
│                                                          │
└──────────────────────────────────────────────────────────┘

